<h1>Application #<%= @application.id %></h1><hr/>

<h2><strong>Name:</strong><%= @application.name %></h2>
<p><strong>Street address:</strong><%= @application.street_address %></p>
<p><strong>City:</strong><%= @application.city %></p>
<p><strong>State:</strong><%= @application.state %></p>
<p><strong>zip_code:</strong><%= @application.zip_code %></p>
<p><strong>description:</strong><%= @application.description %></p><hr/>

<h3>Pets being applied for:</h3>
<% @application.pets.each do |pet| %>
<% pet_app = pet.pet_app(pet.id, @application.id) %>
      <div id="pet-<%= pet.id %>">
        <h4>Name: <%= pet.name %> </h4>
        <p><strong>Breed:</strong><%= pet.breed %></p>
        <p><strong>Age:</strong><%= pet.age %></p>
        <br/>

      <% if pet_app.pet_app_status == nil && pet.adoptable == true %>

        <%= form_with url:"/admin/applications/#{@application.id}?pet_id=#{pet.id}", method: :patch, local: true do |form| %>
          <%= form.submit "Approve" %>
          <%= form.submit "Reject" %>
        <% end %>

      <% elsif pet.adoptable == false && @application.status != "Approved" && pet_app.pet_app_status != false %>

        <p><strong> This pet has already been approved for adoption </strong></p>

        <%= form_with url:"/admin/applications/#{@application.id}?pet_id=#{pet.id}", method: :patch, local: true do |form| %>
        <%= form.submit "Reject" %>
        <% end %>

      <% elsif pet_app.pet_app_status == true %>

        <p> Pet has been approved! </p>

      <% elsif pet_app.pet_app_status == false %>

        <p> Pet has been denied :( </p>


      <% end %>
    </div>
  <% end %>
<hr/>

<h2><strong>Appliction status:</strong><%= @application.status %></h2>
